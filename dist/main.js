(()=>{"use strict";function e(e,t,n,...a){const o=document.createElement(e);return t&&(o.textContent=n[t]),o.classList.add(...a),o}document.getElementById("monthPicker").addEventListener("change",(async function(t){const n=t.target.value,a=document.getElementById("results-tbody"),o=a.cloneNode(!1);a.replaceWith(o),function(t){const n=document.getElementById("results-tbody");t.forEach((t=>{const a=document.createElement("tr"),o=e("td",null,{},"checkbox-td"),c=document.createElement("input");c.type="checkbox",o.appendChild(c),a.appendChild(o),"I"===t.ie&&a.classList.add("type-i"),"E"===t.ie&&a.classList.add("type-e"),a.appendChild(e("td","date",t)),a.appendChild(e("td","bank",t)),a.appendChild(e("td","category",t)),a.appendChild(e("td","content",t)),a.appendChild(e("td","money",t,"money")),n.appendChild(a)}))}(await async function(e){return console.log("date",e),(await async function(e,t={}){try{const n=await fetch(e,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(e){return console.error("Failed to fetch data:",e),alert("요청에 실패했습니다."),null}}(`http://localhost:8080/?date=${e}`,{})).data}(n))})),document.getElementById("enrollSubmit").addEventListener("click",(async function(){console.log("handleSubmit called");const e=document.getElementById("date").value,t=document.getElementById("bank").value,n=document.getElementById("category").value,a=document.getElementById("money").value,o=document.getElementById("content").value,c=document.getElementById("memo").value,d=document.getElementById("ie").value,l={date:new Date(e).toISOString().slice(0,19).replace("T"," "),bank:t,category:n,money:parseFloat(a),content:o,memo:c,ie:d};try{await async function(e){try{console.log("Inserting data:",e);const t=await fetch("http://localhost:8080/income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)return alert("등록에 성공하였습니다"),await t.json();{const e=await t.text();return alert(`등록에 실패하였습니다: ${e}`),null}}catch(e){return console.error("Failed to fetch data:",e),alert("요청에 실패했습니다."),null}}(l);const e=new Date(l.date).toISOString().slice(0,7),t=document.getElementById("monthPicker");t.value=e;const n=new Event("change",{bubbles:!0});t.dispatchEvent(n)}catch(e){console.error("Error occurred while submitting data:",e)}}))})();